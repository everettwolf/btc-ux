<link data-require="font-awesome@*" data-semver="4.3.0" rel="stylesheet"
      href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"/>
<link href='http://fonts.googleapis.com/css?family=Permanent+Marker' rel='stylesheet' type='text/css'>

<style>
    body {
        margin: 30px;
        padding: 0;
        background: #ddd;
        font-family: Arial, Helvetica, sans-serif;
    }

    .title {
        width: 100%;
        max-width: 854px;
        margin: 0 auto;
    }

    .container {
        width: 100%;
        max-width: 854px;
        min-width: 440px;
        background: #e4ce99;
        margin: 0 auto;
    }

    .vid-container {
        position: relative;
        padding-bottom: 52%;
        padding-top: 30px;
        height: 0;
    }

    .vid-container iframe,
    .vid-container object,
    .vid-container embed {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }

    /*  VIDEOS PLAYLIST
             ############################### */

    .vid-list-container {
        width: 92%;
        overflow: hidden;
        margin-top: 20px;
        margin-left: 4%;
        padding-bottom: 20px;
    }

    .vid-list {
        width: 1344px;
        position: relative;
        top: 0;
        left: 0;
    }

    .vid-item {
        display: block;
        width: 148px;
        height: 128px;
        float: left;
        margin: 5px;
        padding: 10px;
        background: #fff;
        font-family: 'Permanent Marker', cursive;
    }

    .thumb {
        /*position: relative;*/
        /*overflow: hidden;*/
        height: 84px;
    }

    .thumb img {
        width: 100%;
        position: relative;
        top: 0;
    }

    .vid-item .joke {
        color: black;
        font-size: 15px;
        margin-top: 5px;
    }

    .vid-item:hover {
        background: #eee;
        cursor: pointer;
    }

    .arrows {
        position: relative;
        width: 100%;
    }

    .arrow-left {
        color: #fff;
        position: absolute;
        background: #777;
        padding: 15px;
        left: -25px;
        top: -130px;
        z-index: 99;
        cursor: pointer;
    }

    .arrow-right {
        color: #fff;
        position: absolute;
        background: #777;
        padding: 15px;
        right: -25px;
        top: -130px;
        z-index: 100;
        cursor: pointer;
    }

    .arrow-left:hover {
        background: #CC181E;
    }

    .arrow-right:hover {
        background: #CC181E;
    }

    @media (max-width: 624px) {
        body {
            margin: 15px;
        }

        .caption {
            margin-top: 40px;
        }

        .vid-list-container {
            padding-bottom: 20px;
        }

        /* reposition left/right arrows */
        .arrows {
            position: relative;
            margin: 0 auto;
            width: 96px;
        }

        .arrow-left {
            left: 0;
            top: -17px;
        }

        .arrow-right {
            right: 0;
            top: -17px;
        }
    }
</style>
<div class="title">
    <h2>Beyond the Comics</h2>
</div>
<div class="comic">I love Eloise</div>
<div class="talent">Chris Wolf</div>
<div class="container">
    <!-- THE YOUTUBE PLAYER -->
    <div class="vid-container">
        <div id="vid-frame"></div>
        <!--<iframe id="vid_frame" src="//www.youtube.com/embed/OsqdeVU4Zak?rel=0&showinfo=0&autohide=1" frameborder="0" width="560" height="315"></iframe>-->
    </div>
    <!-- THE PLAYLIST -->
    <div class="vid-list-container">
        <div class="vid-list">
        </div>
    </div>
    <!-- LEFT AND RIGHT ARROWS -->
    <div class="arrows">
        <div class="arrow-left">
            <i class="fa fa-chevron-left fa-lg"></i>
        </div>
        <div class="arrow-right">
            <i class="fa fa-chevron-right fa-lg"></i>
        </div>
    </div>
</div>
<script>
    (function () {
        //load YT
        if (window.YT) window.YT = null;
        script = document.createElement("SCRIPT");
        script.src = '//www.youtube.com/iframe_api';
        script.type = 'application/javascript';
        document.getElementsByTagName("head")[0].appendChild(script);

        var loadinitiated = new Date().getTime();
        var checkReady = function (callback) {
            if (window.YT && window.YT.Player) {
                var codeloaded = new Date().getTime();
                var loaddelay = ((codeloaded - loadinitiated) / 1000).toFixed(3);
                console.log("BTC Log: Time to load: " + loaddelay);
                console.log("BTC Log: YouTube Player: " + YT.Player);
                callback(true);
            } else {
                console.log("BTC LOADING");
                window.setTimeout(function () {
                    checkReady(callback);
                }, 100);
            }
        };

        checkReady(function (jQuery) {
            var OO;

            var json = {
                "grid": [
                    {
                        "playlistid": "PLLVtQiMiCJeENKOilvJvDv2xd22tTSjzO",
                        "comic": "Church Lady",
                        "joke": "Elvis Twerking",
                        "thumb": "https://i.ytimg.com/vi/1z7im3MTFuU/mqdefault.jpg",
                        "videoid": "1z7im3MTFuU",
                        "talent": "Dana Carvey"
                    },
                    {
                        "playlistid": "PLLVtQiMiCJeGWZ21zwXRPSmw2sZrUp6en",
                        "comic": "Deep Thoughts",
                        "joke": "Two Sacks",
                        "thumb": "https://i.ytimg.com/vi/7Cj7oaGMLSg/mqdefault.jpg",
                        "videoid": "7Cj7oaGMLSg",
                        "talent": "Jack Handey"
                    },
                    {
                        "playlistid": "PLLVtQiMiCJeEYYHFRMDVLmldoiegLStcy",
                        "comic": "Joe Dirt",
                        "joke": "",
                        "thumb": "https://i.ytimg.com/vi/QxQlucRPUhY/mqdefault.jpg",
                        "videoid": "QxQlucRPUhY",
                        "talent": "David Spade"
                    },
                    {
                        "playlistid": "PLLVtQiMiCJeGf0DP7UgvPpQ6zmcwXfjqz",
                        "comic": "Mall Show",
                        "joke": "",
                        "thumb": "https://i.ytimg.com/vi/SgRX3tzxtxg/mqdefault.jpg",
                        "videoid": "SgRX3tzxtxg",
                        "talent": "David Spade"
                    },
                    {
                        "playlistid": "PLLVtQiMiCJeHYIqFdQiQ2SlHUTh12io-1",
                        "comic": "Note to Self",
                        "joke": "",
                        "thumb": "https://i.ytimg.com/vi/ZiGv5ZLw1Js/mqdefault.jpg",
                        "videoid": "ZiGv5ZLw1Js",
                        "talent": "Julianne Moore"
                    },
                    {
                        "playlistid": "PLLVtQiMiCJeFo48auR_WzdQlA_76VIMLb",
                        "comic": "Sketchy Coffee",
                        "joke": "",
                        "thumb": "https://i.ytimg.com/vi/rER3K5vGwbQ/mqdefault.jpg",
                        "videoid": "rER3K5vGwbQ",
                        "talent": "Sarah Silverman"
                    },
                    {
                        "playlistid": "PLLVtQiMiCJeGH4sOLnvW_vecxT-HbcCqH",
                        "comic": "This Just In",
                        "joke": "Domestic Disturbance",
                        "thumb": "https://i.ytimg.com/vi/RTJFhWAQigw/mqdefault.jpg",
                        "videoid": "RTJFhWAQigw",
                        "talent": "Dana Carvey"
                    }
                ]
            };
            var loadSlide = function (idx) {
                var comic_info = $("#vid-item_" + idx).data();
                $(".comic").html(comic_info.comic);
                $(".talent").html(comic_info.talent);
                $(".vid-item").css("background", "#fff");
                $("#vid-item_" + idx).css("background", "#66cdaa");
            };

            var buildCarousel = function () {
                var i = 0;
                console.log(json.grid);
                $.each(json.grid, function (key, val) {
                    $("<div>", {
                        class: "vid-item",
                        id: "vid-item_" + i,
                        data: {comic: val.comic, talent: val.talent}
                    }).appendTo(".vid-list");
                    $("<div>", {
                        class: "thumb",
                        id: "thumb_" + i
                    }).appendTo("#vid-item_" + i)
                    $("<img>", {
                        src: val.thumb
                    }).appendTo("#thumb_" + i)
                    $("<div>", {
                        class: "joke",
                        text: val.joke
                    }).appendTo("#vid-item_" + i)
                    i++;
                });

                $(".vid-item").bind("click", function (event) {
                    var idx = this.id.split("_")[1];
                    loadSlide(idx);
                    OO.loadPlaylist({
                        list: "PLLVtQiMiCJeG_tNuuHw_3ACvXohGh-XGv",
                        listType: "playlist",
                        index: idx
                    })

                });
            };

            var onPlayerReady = function (event) {
                //event.target.playVideo();
            };

            var onPlayerStateChange = function (event) {
                if (event.data === YT.PlayerState.PLAYING) {
                    loadSlide(event.target.getPlaylistIndex());
                }
            };
            var loadYTPlayer = function (PL) {

                OO = new YT.Player('vid-frame', {
                    playerVars: {
                        listType: 'playlist',
                        list: PL,
                        controls: 1,
                        showinfo: 0,
                        modestbranding: 1,
                        rel: 0
                    },
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange
                    }
                });
                buildCarousel();
                loadSlide(0);
            };

            $(".arrow-right").bind("click", function (event) {
                event.preventDefault();
                $(".vid-list-container").stop().animate({
                    scrollLeft: "+=178"
                }, 750);
            });

            $(".arrow-left").bind("click", function (event) {
                event.preventDefault();
                $(".vid-list-container").stop().animate({
                    scrollLeft: "-=178"
                }, 750);
            });

            loadYTPlayer("PLLVtQiMiCJeG_tNuuHw_3ACvXohGh-XGv");

        });
    })();
</script>
